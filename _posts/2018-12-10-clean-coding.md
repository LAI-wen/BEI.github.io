---
title: Clean Coding
tags: [Developer Guide, 好文章翻譯]
style: fill
color: info
description: These four “clean code” tips will dramatically improve your engineering team’s productivity
---

來源：[Jonathan Fulton](https://engineering.videoblocks.com/these-four-clean-code-tips-will-dramatically-improve-your-engineering-teams-productivity-b5bd121dd150)

這是翻譯喔

---

幾年前，我們的團隊 VideoBlocks 面臨了嚴重的程式碼品質問題：幾乎所有檔案都充斥著「義大利麵」邏輯、大量重複程式碼、完全沒有測試等等。開發新功能甚至修復小錯誤，都需要吃胃藥，還經常需要配威士忌才能挺過去。我們的「WTF 每分鐘」指數高得令人咋舌。

{% include elements/figure.html image="https://cdn-images-1.medium.com/max/1600/1*J2mKSLBEp_jUbMtOWXTTjQ.png" caption="幾年前，我們的狀況更接近右邊的房間，但現在我們已經接近左邊的房間了。" %}

如今，透過有意識地提升程式碼品質，我們的程式碼基礎結構已顯著改善。我們團隊共同閱讀了 Robert Martin 的 **《Clean Code》** 並盡力實施他的建議，甚至將「乾淨編碼」納入工程團隊的核心文化準則。我強烈建議，在你的團隊開始擴展時，也應該採取這些措施。適當地實踐乾淨編碼原則，至少能讓生產力翻倍，並大幅提高工程師的士氣。畢竟，如果可以選擇，誰願意待在右邊那樣的房間裡？

---

以下是我們從 **《Clean Code》** 和其他來源實施的四個原則，這些原則貢獻了至少 80% 的生產力提升和團隊滿意度：

1. **「如果沒有測試，就等於壞掉了」**  
   撰寫大量測試，尤其是單元測試，否則你會後悔。
2. **選擇有意義的名稱**  
   使用簡短而精確的名稱來命名變數、類別和函式。
3. **類別和函式應該小且遵循單一職責原則 (SRP)**  
   函式不應超過 4 行，類別不應超過 100 行，並且每個函式/類別應只執行一項任務。
4. **函式不應有副作用**  
   副作用（如修改輸入參數）會引發問題，請避免在程式碼中出現。

接下來，我們逐一詳解這些原則，讓你了解如何在日常開發中應用它們。

---

## 1. 「如果沒有測試，就等於壞掉了」

這句話在我們團隊裡已經成為口頭禪。我們曾遇到無數應該被測試攔截的問題，但這些測試根本不存在。建立測試文化至關重要。請撰寫大量測試，尤其是單元測試，並特別留意核心業務功能的整合測試。記住，沒有測試覆蓋的程式碼，很可能會在未來被你無意間改壞，直到客戶發現錯誤。

在你的團隊中反覆強調這句話，讓大家意識到測試的重要性。

---

## 2. 選擇有意義的名稱

> 「計算機科學中有兩個困難問題：緩存失效和命名。」

如果你的團隊命名能力不佳，程式碼將變得不可維護，團隊效率下降，你可能會失去最好的工程師，甚至公司可能因此倒閉。

千萬不要用糟糕的變數名稱，例如 `data`、`foobar` 或 `myNumber`，更不要用「萬能管理器」名稱，如 `SomethingManager`。名稱應簡短且精確；若發生衝突，以精確為主。透過代碼審查來嚴格執行命名規範。

---

## 3. 類別和函式應該小且遵循單一職責原則 (SRP)

「小」和「SRP」如同雞與蛋的良性循環。

### 小函式

函式應不超過 4 行程式碼。雖然這可能看起來過於嚴苛，但這樣的限制迫使你使用清晰的名稱來分解任務，讓程式碼變得自解釋。此外，它還避免了深層嵌套的 `if` 語句，降低理解代碼的難度。

---

### 單一職責原則 (SRP)

SRP 的定義為：「每個類別或模組應僅負責單一的功能，且僅有一個理由會使其變更。」例如，將報表資料邏輯和呈現邏輯分開，而非混合在一個類別中。

---

## 4. 函式不應有副作用

副作用使程式碼難以維護並易於出錯。例如，某函式在執行查詢時，同時隱含地進行了使用者登入操作。這種設計不僅增加測試難度，也容易造成未來功能需求的耦合問題。

---

### 總結

記住並應用這四個乾淨編碼原則，可以顯著提升團隊的生產力和程式碼品質：

1. **「如果沒有測試，就等於壞掉了」**
2. **選擇有意義的名稱**
3. **類別和函式應該小且遵循單一職責原則 (SRP)**
4. **函式不應有副作用**
